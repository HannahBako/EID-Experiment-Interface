{%extends 'base.html'%}

{% block main %} 
    <!-- <div class="center"> -->
        <div class="row">
            <div class="col s10 flow-text" style="padding-left: 30px;">
                <h1>Experiment Task</h1>
            
                {%if '1' in data.condition %}
                    <p style="text-align: left;">You have been tasked with creating a visual data story for a blog post discussing the effects of global warming on the US atmospheric temperature. 
                        You have been provided with a dataset on average daily temperature recordings from weather stations in the US. 
                        You need to create a centerpiece visualization for the blog post that highlights the following key point: <br><br>
                        <b><i style="text-align: center;">
                            Earth’s temperature has risen by 0.14° Fahrenheit (0.08° Celsius) per decade since 1880, 
                            but the rate of warming since 1981 is more than twice that: 0.32° F (0.18° C) per decade.
                        </i></b>
                    </p>
                    <a href="https://docs.google.com/spreadsheets/d/1CpmKs4ueGSeatGZdpgnzzR9d3rLRfLiN/edit?usp=sharing&ouid=104010880756996677267&rtpof=true&sd=true" target="_blank"><button class="btn waves-effect waves-light btn-large" type="submit" name="action">View Dataset</button></a>  
                {%else%} 
                    <p style="text-align: left;">
                        Palm oil production has been at the forefront of climate talk as a major driver of deforestation. 
                        This has led to drastic changes in consumer behavior as companies and people move away from consuming/using palm oil-based products. 
                        But is this claim true? Is palm oil production any more destructive than other vegetable oil crops being produced? <br>
                        You have been selected to create a visualization that will be submitted to the Iron Viz competition and have been provided with a dataset on: <br>
                        <ol style="text-align: left;">
                            <li>The amount of land used to produce various vegetable crops</li>
                            <li>The expected yield for vegetable oil crops</li>
                            <li>The drivers for deforestation in Indoesia</li>
                        </ol>
                    </p>
                    <p style="text-align: left;">Your task is to create a visualization that communicates two key insights: <br>
                        <ul style="text-align: left;">
                            <li style="list-style-type: disc !important">
                                <b><i>Only 16% of direct deforestation was driven by palm oil plantations. 
                                    Infact most of the land used replaced by palm oil plantations were previously logged forests or scrubland (land destroyed by fire or other natural elements)</i></b>
                            </li>
                            <li style="list-style-type: disc !important">
                                <b><i>Compared to other vegetable oil crops, Palm oil has higher yield per hectare of land. Hence requiring less land use to meet global demand.</i></b>
                            </li>
                        </ul>
                    </p>
                    <p style="text-align: left;">Your visualization will be judged based on how novel your design is and how well you communicate the key insights to your audience.</p>
                    <a href="https://docs.google.com/spreadsheets/d/17p7Qs5lJMjGrvwEYL8B5AwA_svP_uest0bbCb7MoZnQ/edit?usp=sharing" target="_blank"><button class="btn waves-effect waves-light btn-large" type="submit" name="action">View Dataset</button></a>  
                {% endif %}
                <a href="{{url_for('demo', id=data.id, condition=data.condition)}}" style="display: none;" id="proceed"><button class="btn waves-effect waves-light btn-large" type="submit" name="action">Proceed</button></a>
            </div>
            <div class="col s2">
                <div id="counter" style="text-align: left; display: none;" class="flow-text">Time left: <span id="timer"></span></div>
            </div>
        </div>
        
        <script>
            if ("{{ data.condition }}".includes('b')){
                document.getElementById("counter").style.display = "inline"
                //count down timer
                var currDate = new Date()
                var countDownDate = currDate.getTime() + 20*60000
                var x = setInterval(function() {

                // Get today's date and time
                var now = new Date().getTime();

                // Find the distance between now and the count down date
                var distance = countDownDate - now;

                // Time calculations for hours, minutes and seconds
                var minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
                var seconds = Math.floor((distance % (1000 * 60)) / 1000);

                // Display the result in the element with id="demo"
                document.getElementById("timer").innerHTML =  minutes + ":" + seconds;

                // If the count down is finished, write some text
                if (distance < 0) {
                clearInterval(x);
                    document.getElementById("timer").innerHTML = "00:00";
                    document.getElementById("timer").style.color ="red";
                    alert('You have exceeded the time for this section. Please click on the proceed button')
                }
                }, 1000);
                setTimeout((d) =>{
                    document.getElementById("proceed").style.display = "inline"
                }, 20*60000)
            }else{
                document.getElementById("counter").style.display = "inline"
                //count down timer
                var currDate = new Date()
                var countDownDate = currDate.getTime() + 5*60000
                var x = setInterval(function() {

                // Get today's date and time
                var now = new Date().getTime();

                // Find the distance between now and the count down date
                var distance = countDownDate - now;

                // Time calculations for hours, minutes and seconds
                var minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
                var seconds = Math.floor((distance % (1000 * 60)) / 1000);

                // Display the result in the element with id="demo"
                document.getElementById("timer").innerHTML =  minutes + ":" + seconds;
                
                // If the count down is finished, write some text
                if (distance < 0) {
                clearInterval(x);
                    document.getElementById("timer").innerHTML = "00:00";
                    document.getElementById("timer").style.color ="red";
                    alert('You have exceeded the time for this section. Please click on the proceed button')
                }
                }, 1000);
                setTimeout((d) =>{
                    document.getElementById("proceed").style.display = "inline"
                }, 5*60000)
            }

            
        </script>
    <!-- </div> -->
{% endblock %}

